<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>KSS(Knyle Style Sheets)でstyleguideを作成 | 69log</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="前回はStyleDoccoを試したので、もう一つのKSS(Knyle Style Sheets)も試してみた。">
<meta property="og:type" content="article">
<meta property="og:title" content="KSS(Knyle Style Sheets)でstyleguideを作成">
<meta property="og:url" content="http://blog.kazu69.net/2012/12/26/kssknyle-style-sheets-styleguide/index.html">
<meta property="og:site_name" content="69log">
<meta property="og:description" content="前回はStyleDoccoを試したので、もう一つのKSS(Knyle Style Sheets)も試してみた。">
<meta property="og:image" content="http://kazu69.net/blog/wp-content/uploads/2012/12/kss-e1356528428965.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="KSS(Knyle Style Sheets)でstyleguideを作成">
<meta name="twitter:description" content="前回はStyleDoccoを試したので、もう一つのKSS(Knyle Style Sheets)も試してみた。">
  
    <link rel="alternative" href="/atom.xml" title="69log" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
    <header role="header">
  <div class="header cf">
    <div class="title-content">
      <h1>
        <a href="/">69log</a>
      </h1>
      
        <h2>
          <a href="/">福岡でwebの仕事をしています</a>
        </h2>
      
    </div>

    <div class="nav-content cf">
      <nav>
        
          <a href="/" class="nav-link nav-home">home</a>
        
          <a href="/archives" class="nav-link nav-archives">archives</a>
        
        
          <a href="/atom.xml" title="RSS Feed" class="icon nav-link nav-feed"></a>
        
      </nav>
      <div class="header-search">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="hidden" name="q" value="site:http://blog.kazu69.net"></form>
      </div>
    </div>
  </div>
</header>

    <main role="main" id="main">
      <section><article id="post-kssknyle-style-sheets-styleguide" class="article article-type-post" itemscope itemprop="blogPost">
  <header class="article-header">
    
      
  
    <h1 class="article-title" itemprop="name">
      KSS(Knyle Style Sheets)でstyleguideを作成
    </h1>
  

    
    <div class="article-meta clr">
      <time datetime="2012-12-26T13:34:54.000Z" itemprop="datePublished">2012-12-26</time>

      
  <div class="article-category">
    <a class="article-category-link" href="/categories/ruby/">ruby</a>
  </div>

    </div>
  </header>

  <div class="article-entry" itemprop="articleBody">
    <div class="article-gallery">
      
    </div>
    
      <p><a href="http://kazu69.net/blog/tec/1411/" target="_blank" rel="external">前回はStyleDoccoを試した</a>ので、もう一つの<a href="http://warpspire.com/kss/" target="_blank" rel="external">KSS(Knyle Style Sheets)</a>も試してみた。<br><a id="more"></a></p>
<h3 id="KSSについて">KSSについて</h3><p>KSSは<a href="http://tomdoc.org/" target="_blank" rel="external">TomDoc</a>をモデルに開発された stlyeguide generatorらしい。<br><a href="https://speakerdeck.com/kneath/a-better-future-with-kss" target="_blank" rel="external">A better future with KSS をみればどんなものか把握できそう。</a><br>CSSを文書化して、各UIの状態を視覚化することで保守性を高めらる。また生成されるドキュメントは階層構造を持っているのでスタイルの継承を把握しやすい感じですかな。</p>
<p>Styledoccoと同じくcssやScssなどのファイルにコメント追加するのですが、KSSの場合はフォーマットがあります。</p>
<p>[css]<br>//<br>// スタイルに関する仕様や説明を記載。<br>// Starを付けるbutton<br>//<br>// Experimental: A/Bテストなどの実験的要素<br>//<br>// Deprecated: 廃止予定の要素<br>//<br>// modifiers(修飾子)  要素の状態(疑似クラスなど)を文章化<br>// :hover             - hover時のハイライト<br>// .stars-given       - 与えられたStarのハイライト<br>// .stars-given:hover - StarのHover時のハイライト<br>// .disabled          -disbled時のスタイル<br>//<br>// セクション情報 参照情報(ドット区切り)<br>// Styleguide 2.1.3.<br>//<br>[/css]</p>
<p>また CSS PreprocessorのHelper(mixinやfunction)などについても説明を使います。</p>
<p>[css]<br>// 縦方向のグラデーション<br>//<br>// $start - 開始点の色(HEX)<br>// $end   - 終点の色(HEX)<br>//<br>// Compatible in IE6+, Firefox 2+, Safari 4+.<br>@mixin gradient($start, $end){<br>  background: $start;<br>  background: -webkit-gradient(linear, left top, left bottom, from($start), to($end));<br>  background: -moz-linear-gradient(top, $start, $end);<br>  background: -o-linear-gradient($start, $end);<br>  background: linear-gradient($start, $end);<br>  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=’#{$start}’, endColorstr=’#{$end}’);<br>  zoom:1;<br>}<br>[/css]</p>
<p>KSSはRubyで実装されたParserで、gemでインストールができる。<br>また、Rails用に<a href="https://github.com/dewski/kss-rails" target="_blank" rel="external">kss-rails</a>もあるので既存のRubyでのプロジェクトにも導入しやすそう。</p>
<h3 id="Sinatraで試してみた">Sinatraで試してみた</h3><p>今回は<a href="http://www.sinatrarb.com/" target="_blank" rel="external">Sinatra</a>でサンプルを生成してみた。<br>以下のような構成で、</p>
<p>[shell]<br>kss<br>├── Gemfile<br>├── app.rb<br>└── views<br>     └── sass<br>　　　      └── buttons.scss<br>[/shell]</p>
<p>Gemfile、app.rbは次のような感じ。</p>
<p>[ruby]</p>
<h1 id="Gemfile">Gemfile</h1><p>source :rubygems<br>gem ‘sinatra’<br>gem ‘sinatra-contrib’<br>gem ‘sass’<br>gem ‘compass’<br>gem ‘thin’<br>gem ‘kss’<br>[/ruby]</p>
<p>[ruby]</p>
<h1 id="app-rb">app.rb</h1><p>require ‘sinatra’<br>require ‘sinatra/capture’<br>require ‘erb’<br>require ‘sass’<br>require ‘kss’</p>
<p>set :partial_template_engine, :erb<br>set :scss, :style =&gt; :compact</p>
<h1 id="sassファイルを格納するディレクリをsassに変更した">sassファイルを格納するディレクリをsassに変更した</h1><p>set :views,   File.dirname(<strong>FILE</strong>)    + ‘/views/sass’</p>
<h1 id="kssでパーするファイルの格納ディレクトリ">kssでパーするファイルの格納ディレクトリ</h1><p>before do<br>    @styleguide = Kss::Parser.new(‘views/sass’)<br>end</p>
<p>helpers do</p>
<h1 id="kssでパースするスタイルシートをまとめて出力">kssでパースするスタイルシートをまとめて出力</h1><p>  def stylesheets<br>    stylesheets = ‘’<br>    @styleguide.sections.each do |key, val|<br>      filename = val.filename.split(/.scss/).first<br>      stylesheets += ‘&lt;link rel=&quot;stylesheet&quot; href=&quot;stylesheets/‘ + filename + ‘.css&quot; type=&quot;text/css&quot; /&gt;’<br>    end<br>    stylesheets<br>  end</p>
<h1 id="セクション毎のサンプルを出力">セクション毎のサンプルを出力</h1><p>  def styleguide_block(section, &amp;block)<br>    @section = @styleguide.section(section)<br>    @sample_html = capture{block.call}<br>    @row_html = ERB::Util.html_escape @sample_html<br>    @_out_buf &lt;&lt; erb(:_styleguide_partial)<br>  end</p>
<p>end</p>
<p>get ‘/stylesheets/*.css’ do<br>  content_type ‘text/css’, :charset =&gt; ‘utf-8’<br>  filename = params[:splat].first<br>  scss filename.to_sym<br>end</p>
<p>get ‘/‘ do<br>  erb :index<br>end</p>
<p>get ‘/:section’ do</p>
<h1 id="Routing">Routing</h1><p>  case params[:section].to_i<br>  when 1.0<br>    erb :button<br>  end<br>end</p>
<p><strong>END</strong></p>
<p>@@ layout<br>&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>  &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=UTF-8&quot; /&gt;<br>  &lt;title&gt;Styleguide Example&lt;/title&gt;<br>  &lt;link rel=&quot;stylesheet&quot; href=&quot;stylesheets/layout.css&quot; type=&quot;text/css&quot; /&gt;<br>  &lt;%= stylesheets %&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>  &lt;header&gt;<br>    Styleguide<br>  &lt;/header&gt;<br>  &lt;div id=&quot;wrapper&quot;&gt;<br>    &lt;nav role=&quot;main&quot;&gt;<br>       &lt;ul&gt;<br>        &lt;li&gt;&lt;a href=&quot;/&quot;&gt;Styleguide&lt;/a&gt;&lt;/li&gt;<br>        &lt;li&gt;&lt;a href=&quot;/1.0&quot;&gt;1.0 Buttons&lt;/a&gt;&lt;/li&gt;<br>      &lt;/ul&gt;<br>    &lt;/nav&gt;<br>    &lt;%= yield %&gt;<br>  &lt;/div&gt;<br>  &lt;script src=&quot;javascripts/kss.js&quot;&gt;&lt;/script&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</p>
<p>@@ index<br>  &lt;p&gt;各セクションにスタイルガイドブロックを配置することでスタイルガイド生成できます。&lt;/p&gt;</p>
<p>@@ button<br>  &lt;% styleguide_block ‘1.1’ do %&gt;<br>    &lt;button class=&quot;button $modifier&quot;&gt;Button&lt;/button&gt;<br>    &lt;a href=&quot;#&quot; class=&quot;button $modifier&quot;&gt;&lt;span&gt;Button&lt;/span&gt;&lt;/a&gt;<br>  &lt;% end %&gt;</p>
<p>  &lt;% styleguide_block ‘1.2’ do %&gt;<br>    &lt;button class=&quot;small $modifier&quot;&gt;Small&lt;/button&gt;<br>    &lt;a href=&quot;#&quot; class=&quot;small $modifier&quot;&gt;&lt;span&gt;Small&lt;/span&gt;&lt;/a&gt;<br>  &lt;% end %&gt;</p>
<p>@@ _styleguide_partial<br>&lt;div class=&quot;styleguide-example&quot;&gt;<br>  &lt;h3&gt;&lt;%= @section.section %&gt; &lt;em&gt;&lt;%= @section.filename %&gt;&lt;/em&gt;&lt;/h3&gt;<br>  &lt;div class=&quot;styleguide-description&quot;&gt;<br>    &lt;p&gt;&lt;%= @section.description %&gt;&lt;/p&gt;<br>    &lt;% if @section.modifiers.any? %&gt;<br>      &lt;ul class=&quot;styleguide-modifier&quot;&gt;<br>        &lt;% @section.modifiers.each do |modifier| %&gt;<br>          &lt;li&gt;&lt;strong&gt;&lt;%= modifier.name %&gt;&lt;/strong&gt; - &lt;%= modifier.description %&gt;&lt;/li&gt;<br>        &lt;% end %&gt;<br>      &lt;/ul&gt;<br>    &lt;% end %&gt;<br>  &lt;/div&gt;<br>  &lt;div class=&quot;styleguide-element&quot;&gt;<br>    &lt;%= @sample_html %&gt;<br>  &lt;/div&gt;<br>  &lt;% @section.modifiers.each do |modifier| %&gt;<br>    &lt;div class=&quot;styleguide-element styleguide-modifier&quot;&gt;<br>      &lt;span class=&quot;styleguide-modifier-name&quot;&gt;&lt;%= modifier.name %&gt;&lt;/span&gt;<br>      &lt;%# $modifier を modifier に置換 %&gt;<br>      &lt;%= @sample_html.gsub(‘$modifier’, &quot;#{modifier.class_name}&quot;) %&gt;<br>    &lt;/div&gt;<br>  &lt;% end %&gt;<br>  &lt;pre class=&quot;styleguide-code&quot;&gt;&lt;%= @row_html %&gt;&lt;/pre&gt;<br>&lt;/div&gt;<br>[/ruby]</p>
<p>で、コメントを付きのScssファイルは以下のような感じ。</p>
<p>[css]<br>// Buttons styles<br>//<br>// :hover    - Hovering highlights.<br>// :disabled - Disabled Style.<br>// .primary  - Primary action button style.<br>//<br>// Styleguide 1.1</p>
<p>@mixin gradient($start, $end){<br>  background: $start;<br>  background: -webkit-gradient(linear, left top, left bottom, from($start), to($end));<br>  background: -moz-linear-gradient(top, $start, $end);<br>  background: -o-linear-gradient($start, $end);<br>  background: linear-gradient($start, $end);<br>  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=’#{$start}’, endColorstr=’#{$end}’);<br>  zoom:1;<br>}</p>
<p>%button {<br>  padding: 5px 15px;<br>  border-radius: 3px;<br>  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15);<br>  text-decoration: none;<br>  font-weight: bold;<br>  font-family: &quot;Helvetica Neue&quot;, Helvetica;<br>  line-height: normal;<br>  cursor: pointer;<br>}</p>
<p>.button {<br>  @extend %button;<br>  @include gradient(#fefefe, #e6e6e6);<br>  min-width: 120px;<br>  border: 1px solid #d0d0d0;<br>  color: #666;<br>  text-shadow: 0 1px rgba(255, 255, 255, 0.9);<br>  font-size: 12px;<br>  &amp;:hover {<br>    @include gradient(#f2f2f2, #E2E2E2);<br>    border-color: #C5C5C5;<br>  }<br>  &amp;:disabled {<br>    opacity: 0.5;<br>  }<br>}</p>
<p>.primary,<br>.primary:hover {<br>  @extend .button;<br>  @include gradient(#007fcc, #0045cc);<br>  min-width: 120px;<br>  border-color: #0062b8;<br>  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);<br>  color: #fff;<br>  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.4);<br>}</p>
<p>// Smaller uuttons styles<br>//<br>// :hover               - Hovering highlights.<br>// :disabled            - Disabled Style.<br>// .small-primary       - Primary action button style.<br>// .small-primary:hover - Primary action button hovering highlights<br>//<br>// Styleguide 1.2</p>
<p>.small {<br>  @extend %button;<br>  @include gradient(#fefefe, #e6e6e6);<br>  border: 1px solid #d0d0d0;<br>  color: #666;<br>  text-shadow: 0 1px rgba(255, 255, 255, 0.9);<br>  font-size: 10px;<br>  &amp;:hover {<br>    @include gradient(#f2f2f2, #E2E2E2);<br>    border-color: #C5C5C5;<br>  }<br>  &amp;:disabled {<br>    opacity: 0.5;<br>  }<br>}</p>
<p>.small-primary {<br>  @extend .small;<br>  @include gradient(#85d868, #61b145);<br>  border-color: #74bb5a;<br>  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);<br>  color: #fff;<br>  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.4);<br>  &amp;:hover {<br>    @include gradient(#67cd43, #4c8c36);<br>    border-color: #4a993e;<br>  }<br>}<br>[/css]</p>
<p>なかんじでやると、以下のような画面が生成されます。</p>
<p><img src="http://kazu69.net/blog/wp-content/uploads/2012/12/kss-e1356528428965.png" alt=""></p>
<p>GithubやTwitter BootstrapでみるStyleguideですね。<br>セクションで管理することで、要素のスタイルの継承が明確にできる点がいいですね。オブジェクティブなスタイルシート構成であればあるほどわかりやすいドキュメントを作成できそう。</p>
<p>RubyのプロジェクトならKSSを使うのも良さそうだ。</p>
<p><a href="https://github.com/kazu69/kss-sample" target="_blank" rel="external">今回のサンプル</a></p>

    
  </div>

  
    <footer class="article-footer">
      <a data-url="http://blog.kazu69.net/2012/12/26/kssknyle-style-sheets-styleguide/" data-id="ci9i25kdn00a9qep452n1z0at" class="article-share-link">Share</a>
      
        <a href="http://blog.kazu69.net/2012/12/26/kssknyle-style-sheets-styleguide/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  

  
    
<nav id="article-nav">
  <div class="article-nav">
    
      <a href="/2013/01/10/grunt-jasmine-headless-unit-test/" id="article-nav-newer" class="article-nav-link article-nav-link-newer">
        <span class="article-nav-caption">Newer - </span>
        <span class="article-nav-title">
          
            GruntでJasmineを使ったHeadlessなユニットテスト
          
        </span>
      </a>
    
    
      <a href="/2012/12/23/styledocco-styleguide/" id="article-nav-older" class="article-nav-link article-nav-link-older">
        <span class="article-nav-caption">Older - </span>
        <span class="article-nav-title">
          
            StyleDoccoでstyleguideを作成
          
        </span>
        </span>
      </a>
    
  </div>
</nav>

  
</article>


  <aside>
    
<!-- Google Adsence -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
   style="display:block"
   data-ad-client="ca-pub-4054575508733221"
   data-ad-slot="9493597992"
   data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<!-- End Google Adsence -->


  </aside>



<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
      
    </main>
    <footer id="footer" role="contentinfo">
  
  <div class="footer-cotent">
    <small>&copy; 2015 kazu69</small>
    <span class="generator">Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></span>
  </div>
</footer>
    
<script>
  var disqus_shortname = '69log';
  
  var disqus_url = 'http://blog.kazu69.net/2012/12/26/kssknyle-style-sheets-styleguide/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

</body>
</html>